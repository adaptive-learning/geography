<blind-map code="{{part}}" show-tooltips="true" map="map" ></blind-map>
<div id="container">
  <div ng-hide="placesTypes || error" class="loading-indicator">
  </div>
  <div ng-show="error" ng-bind="error" class="alert alert-danger">
  </div>
  <ul ng-show="placesTypes.length && (filteredTypes = (placesTypes|isTypeCategory:typeCat)).length" 
      class="thumbnails fade-show-hide"
      ng-repeat="typeCat in typeCategories">
    <div ng-click="updateCat(typeCat)"
        class="collapse-control"
        ng-show="filteredTypes.length > 0 && placesTypes.length > 1">
      <h2>
        <i class="glyphicon {{typeCat.hidden && 'glyphicon-plus-sign' || 'glyphicon-minus-sign'}}"></i>
        {{typeCat.name}}
      </h2>
      <a href="#/practice/{{part}}/{{typeCat.slug}}" 
         class="btn btn-primary pull-right" 
         ng-hide="typeCat.hidden || filteredTypes.length == 1" >
        <i class="glyphicon glyphicon-check"></i> {{'Procvičovat' | trans }}
      </a>
      <div class="clearfix"></div>
    </div>
    <div collapse="typeCat.hidden">
      <li class="col-sm-{{filteredTypes.length|colNum}}" 
          ng-repeat="type in filteredTypes">
        <div ng-click="updateMap(type)"
            class="collapse-control collapse-control-inner">
          <h3>
            <i class="glyphicon {{type.hidden && 'glyphicon-plus-sign' || 'glyphicon-minus-sign'}}"></i>
            {{type.name}}
          </h3>
          <a href="#/practice/{{part}}/{{type.slug}}" 
             class="btn btn-primary pull-right"  >
            <i class="glyphicon glyphicon-check"></i> {{'Procvičovat' | trans }}
          </a>
          <div class="clearfix"></div>
        </div>
        <div class="map-progress" count="{{type.places.length}}"  
             skills="{{ {
               practiced:(type.places|filter:{practiced:true}).length,
               learned:(type.places|filter:{learned:true}).length
             } }}"></div>
        <div class="view-places" collapse="type.hidden">
          <div ng-hide="(type.places|filter:{displayed:true}).length" class="alert alert-info">
            {{'Zde zatím nebylo nic procvičováno.' | trans }}
          </div>
          <span ng-repeat="place in type.places|filter:{displayed:true}"
                ng-click="placeClick(place)"
                style="border-bottom: 5px solid {{place.probability|probColor}};"
                place-label>
          </span>
          <div class="clearfix"></div>
        </div>
      </li>
    </div>
  </ul>
  <div class="clearfix"></div>
</div>
