angular.module("googleExperiments",[]),angular.module("googleExperiments").provider("googleExperiments",[function(){this.configure=function(conf){this.config=conf},this.$get=function($q,$timeout){var variationDeferred=$q.defer(),s=document.createElement("script");return $timeout(function(){variationDeferred.resolve(cxApi.chooseVariation())},300,!1),s.async=!1,s.src="//www.google-analytics.com/cx/api.js?experiment="+this.config.experimentId,angular.element("body").append(s),{getVariation:function(){return variationDeferred.promise}}}}]),angular.module("googleExperiments").directive("variation",['googleExperiments',function(googleExperiments){return function(scope,element,attr){element.addClass("ng-cloak"),scope.$watch(attr.variation,function(value){googleExperiments.getVariation().then(function(variation){variation==value?(element.removeClass("ng-cloak"),element.removeClass("ng-hide")):element.addClass("ng-hide")})})}}]);
